<CascadingValue Value="this">

    <MudThemeProvider @bind-IsDarkMode="@_isDarkMode" Theme="_theme" />
    <MudDialogProvider />
    <MudSnackbarProvider />
    <MudPopoverProvider />

    <PageTransition />

    <Router AppAssembly="@typeof(App).Assembly">

        <Found Context="routeData">
            <RouteView RouteData="@routeData" DefaultLayout="@typeof(MainLayout)" />
            <FocusOnNavigate RouteData="@routeData" Selector="h1" />
        </Found>

        <NotFound>
            <PageTitle>Not found</PageTitle>
            <LayoutView Layout="@typeof(MainLayout)">
                <MudContainer Class="mt-6">
                    <MudText Typo="Typo.h4" Align="Align.Center" GutterBottom="true">Page not found</MudText>
                    <MudText Typo="Typo.body1" Align="Align.Center">
                        Sorry, there's nothing at this address.
                    </MudText>
                    <MudContainer Class="d-flex justify-center mt-4">
                        <MudButton Variant="Variant.Filled" Color="Color.Primary" Href="/">Go Home</MudButton>
                    </MudContainer>
                </MudContainer>
            </LayoutView>
        </NotFound>

    </Router>

</CascadingValue>

@code
{
    private bool _isDarkMode = false;

    // Custom theme colors
    private MudTheme _theme = new MudTheme()
    {
        Palette = new PaletteLight()
        {
            Primary = "#3949AB",
            Secondary = "#FF4081",
            AppbarBackground = "#3949AB",
            Background = "#F5F5F5",
            DrawerBackground = "#FFF",
            DrawerText = "rgba(0,0,0, 0.7)",
            Success = "#007E33"
        },
        PaletteDark = new PaletteDark()
        {
            Primary = "#5C6BC0",
            Secondary = "#FF80AB",
            AppbarBackground = "#252525",
            Background = "#1E1E1E",
            Surface = "#252525",
            DrawerBackground = "#1E1E1E",
            DrawerText = "rgba(255,255,255, 0.7)",
            Success = "#00C851"
        }
    };

    public void ToggleTheme()
    {
        _isDarkMode = !_isDarkMode;
        StateHasChanged();
    }
}
