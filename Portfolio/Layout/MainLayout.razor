@inherits LayoutComponentBase
@inject NavigationManager NavigationManager

<MudLayout>
    <MudAppBar Elevation="1" Fixed="true" Dense="true">
        <MudIconButton Icon="@Icons.Material.Filled.Code" Color="Color.Inherit" Edge="Edge.Start" />
        <MudText Typo="Typo.h6" Class="ml-2">Portfolio App</MudText>
        <MudSpacer />

        <MudIconButton Icon="@Icons.Material.Filled.Work" Color="Color.Inherit"
            Href="/projects" Class="ml-4">Projects</MudIconButton>
        <MudIconButton Icon="@Icons.Material.Filled.Psychology" Color="Color.Inherit"
            Href="/skills">Skills</MudIconButton>

        <MudSpacer />

        <MudIconButton Icon="@(_isDarkMode? Icons.Material.Filled.LightMode : Icons.Material.Filled.DarkMode)"
            Color="Color.Inherit" OnClick="ToggleTheme" />
        <MudIconButton Icon="@Icons.Material.Filled.Info" Color="Color.Inherit"
            Href="/about">About</MudIconButton>
        <MudIconButton Icon="@Icons.Material.Filled.Email" Color="Color.Inherit"
            Href="/contact">Contact</MudIconButton>
        <MudAvatar Color="Color.Secondary" Class="ml-2">JD</MudAvatar>
    </MudAppBar>

    <MudMainContent Class="pt-16 pb-16 animate">
        @Body
    </MudMainContent>

    <MudAppBar Bottom="true" Fixed="true" Dense="true" Elevation="1" Class="footer">
        <MudText Typo="Typo.body2">© @DateTime.Now.Year - Portfolio App - Created with Blazor & MudBlazor</MudText>
        <MudSpacer />
        <MudIconButton Icon="@Icons.Custom.Brands.GitHub" Color="Color.Inherit" Href="https://github.com/"
            Target="_blank" />
        <MudIconButton Icon="@Icons.Custom.Brands.LinkedIn" Color="Color.Inherit" Href="https://linkedin.com/"
            Target="_blank" />
    </MudAppBar>
</MudLayout>

<style>
    .animate {
        animation: fadeIn 0.5s ease-in-out;
    }

    @@keyframes fadeIn {
        0% {
            opacity: 0;
            transform: translateY(10px);
        }

        100% {
            opacity: 1;
            transform: translateY(0);
        }
    }

    /* Add smooth transitions to all interactive elements */
    .mud-button,
    .mud-icon-button {
        transition: all 0.2s ease-in-out;
    }

    .mud-button:hover,
    .mud-icon-button:hover {
        transform: scale(1.05);
    }
</style>

@code
{
    private bool _isDarkMode = false;

    [CascadingParameter]
    private App? AppState { get; set; }

    protected override void OnInitialized()
    {
        // Initialize theme from local storage or user preference
        // You could add code here to load saved theme preference
    }

    private void ToggleTheme()
    {
        _isDarkMode = !_isDarkMode;
        if (AppState != null)
        {
            AppState.ToggleTheme();
        }
    }
}
